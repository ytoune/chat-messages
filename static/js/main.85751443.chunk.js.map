{"version":3,"sources":["talk/set.js","fix.js","talk/when.js","views/Message.js","views/DateInput.js","views/index.js","talk/dateForm.js","talk/selectForm.js","talk/link.js","talk/consts.js","subjects/part.js","talk/getStory.js","talk/index.js","talk/message.js","talk/delay.js","talk/enumForm.js","talk/pending.js","talk/clear.js","subjects/story.js","views/autoScroll.js","App.js","index.js"],"names":["set","vars","name","_value","value","txt","withVars","match","eval","of","text","replace","_","method","f","table","q","length","trim","window","__MUI_USE_NEXT_TYPOGRAPHY_VARIANTS__","talk","Line","withStyles","root","marginTop","children","classes","className","Message","icon","speaker","Hidable","show","Chip","Icon","label","clickable","variant","Utils","date","this","locale","format","ampm","toFormat","LuxonUtils","wrap","Picker","over","props","utils","TimeInput","TimePicker","DateInput","DatePicker","DateTimeInput","DateTimePicker","Right","textAlign","Input","outfmt","infmt","initdatetime","res","Form","p","state","v","DateTime","fromFormat","local","Button","color","readOnly","onSubmit","setState","onChange","a","onClick","Component","pipe","concatMap","num","Promise","r","filter","dateForm","datetimeForm","timeForm","FormWrap","t","margin","spacing","unit","minWidth","maxWidth","withTheme","FormControl","MenuProps","disableAutoFocusItem","PaperProps","style","maxHeight","ITEM_HEIGHT","width","Ln","href","target","CLEAR","NO_CHANGE","POP","part","ReplaySubject","pushPart","item","next","parseYaml","safeLoad","readFile","file","query","fetch","stringify","then","isArray","Array","w","has","indexOf","message","Typography","delay","ms","s","setTimeout","usleep","enumForm","enums","done","selected","select","map","disabled","selectForm","_enums","dict","reduce","d","n","val","key","getlabel","k","opts","multiple","includes","allowEmpty","placeholder","test","pop","slice","ref","createRef","id","Date","now","Math","random","open","join","ok","onClose","_flag","onOpen","Select","displayEmpty","input","onFocus","renderValue","MenuItem","link","title","component","pending","resolve","Mortal","_id","dead","clearTimeout","type","height","prom","clear","getStory","names","o","args","fn","when","cond","shift","from","Error","body","split","op","variables","story","switchMap","el","document","querySelector","innerText","scan","lst","c","inView","element","getBoundingClientRect","top","bottom","innerHeight","getPosition","max","getViewTop","documentElement","parentNode","scrollTop","bodystyle","createElement","head","append","innerHTML","App","padding","card","marginBottom","content","paddingTop","paddingBottom","paddingLeft","paddingRight","lastref","prevref","$","subscribe","bind","current","prev","_cancel","scroll","SmoothScroll","animateScroll","cancelScroll","destroy","autoScroll","unsubscribe","row","i","Paper","render","getElementById","catch","console","log"],"mappings":"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","file":"static/js/main.85751443.chunk.js","sourcesContent":["import { of } from 'rxjs'\n\nexport const set = (vars, name, _value) => {\n\tlet value = _value\n\tconst txt = withVars(`${value}`, vars)\n\tif (txt.match(/^[0-9.+\\-/*%\\s)(]+$/)) {\n\t\t// eslint-disable-next-line no-eval\n\t\tvalue = eval(txt)\n\t}\n\tvars[name] = value\n\treturn of()\n}\n\nexport const withVars = (text, vars) =>\n\ttext.replace(/__([a-zA-Z0-9]+)(|%[a-zA-Z]+)__/giu, (_, name, method) => {\n\t\tconst f = table[method]\n\t\treturn f ? f(vars[name]) : vars[name]\n\t})\n\nconst table = {\n\t'%length': q => q.length,\n\t'%trim': q => q.trim(),\n\t'%year': q => q.match(/\\d+/gu)[0],\n\t'%month': q => q.match(/\\d+/gu)[1],\n\t'%day': q => q.match(/\\d+/gu)[2],\n}\n","window.__MUI_USE_NEXT_TYPOGRAPHY_VARIANTS__ = true\r\n","import { of, from } from 'rxjs'\r\nimport { concatMap } from 'rxjs/operators'\r\n\r\nexport const when = talk => (vars, ...args) => {\r\n\twhile (args.length) {\r\n\t\tconst cond = args.shift()\r\n\t\tif ('string' === typeof cond && args.length) {\r\n\t\t\tconst body = args.shift()\r\n\t\t\tif (!isArray(body))\r\n\t\t\t\tthrow new Error('syntax error, body is required to be array')\r\n\t\t\tconst [name, op, value] = `${cond}`.split(/\\s/giu)\r\n\t\t\tconst fn = table[op]\r\n\t\t\tif (!fn) throw new Error('fail to parse condition')\r\n\t\t\tif (fn(vars[name], value)) {\r\n\t\t\t\treturn from(body).pipe(concatMap(talk(vars)))\r\n\t\t\t}\r\n\t\t} else if (isArray(cond) && !args.length) {\r\n\t\t\treturn from(cond).pipe(concatMap(talk(vars)))\r\n\t\t} else {\r\n\t\t\tthrow new Error('invalid arguments length')\r\n\t\t}\r\n\t}\r\n\treturn of()\r\n}\r\n\r\nconst { isArray } = Array\r\n\r\n/* eslint-disable eqeqeq */\r\nconst table = {\r\n\t'=': (q, w) => q == w,\r\n\t'==': (q, w) => q == w,\r\n\t'!=': (q, w) => q != w,\r\n\t'<>': (q, w) => q != w,\r\n\t'<': (q, w) => q < w,\r\n\t'<=': (q, w) => q <= w,\r\n\t'>': (q, w) => q > w,\r\n\t'>=': (q, w) => q >= w,\r\n\thas: (q, w) => ~q.indexOf(w),\r\n}\r\n/* eslint-enable */\r\n","import React, { Fragment } from 'react'\r\n\r\nimport Chip from '@material-ui/core/Chip'\r\nimport Icon from '@material-ui/core/Icon'\r\n\r\nimport { Hidable } from '../views'\r\nimport { withStyles } from '@material-ui/core/styles'\r\n\r\nconst Line = withStyles({\r\n\troot: {\r\n\t\tmarginTop: '.5em',\r\n\t},\r\n})(({ children, classes: { root } }) => <div className={root}>{children}</div>)\r\n\r\nexport const Message = ({ icon, speaker, children }) => (\r\n\t<Fragment>\r\n\t\t<Hidable show={speaker}>\r\n\t\t\t<Chip\r\n\t\t\t\ticon={icon ? <Icon>{icon}</Icon> : null}\r\n\t\t\t\tlabel={speaker}\r\n\t\t\t\tclickable\r\n\t\t\t\tvariant=\"outlined\"\r\n\t\t\t/>\r\n\t\t</Hidable>\r\n\t\t<Line>{children}</Line>\r\n\t</Fragment>\r\n)\r\n","import React from 'react'\r\n\r\nimport UtilsProvider from 'material-ui-pickers/MuiPickersUtilsProvider'\r\nimport LuxonUtils from '@date-io/luxon'\r\n\r\nimport TimePicker from 'material-ui-pickers/TimePicker'\r\nimport DatePicker from 'material-ui-pickers/DatePicker'\r\nimport DateTimePicker from 'material-ui-pickers/DateTimePicker'\r\n\r\nclass Utils extends LuxonUtils {\r\n\tgetYearText(date) {\r\n\t\tif ('ja' !== this.locale) return super.getYearText(date)\r\n\t\treturn this.format(date, 'y年')\r\n\t}\r\n\tgetDatePickerHeaderText(date) {\r\n\t\tif ('ja' !== this.locale) return super.getDatePickerHeaderText(date)\r\n\t\treturn this.format(date, 'M月d日 (ccc)')\r\n\t}\r\n\tgetCalendarHeaderText(date) {\r\n\t\tif ('ja' !== this.locale) return super.getCalendarHeaderText(date)\r\n\t\treturn this.format(date, 'y年M月')\r\n\t}\r\n\tgetDateTimePickerHeaderText(date) {\r\n\t\tif ('ja' !== this.locale) return super.getDateTimePickerHeaderText(date)\r\n\t\treturn this.format(date, 'M / d')\r\n\t}\r\n\tgetDayText(date) {\r\n\t\tif ('ja' !== this.locale) return super.getDayText(date)\r\n\t\treturn this.format(date, 'd')\r\n\t}\r\n\tgetHourText(date, ampm) {\r\n\t\tif ('ja' !== this.locale) return super.getHourText(date, ampm)\r\n\t\tif (ampm) {\r\n\t\t\treturn date.toFormat('hh')\r\n\t\t}\r\n\t\treturn date.toFormat('HH')\r\n\t}\r\n\tgetMinuteText(date) {\r\n\t\tif ('ja' !== this.locale) return super.getMinuteText(date)\r\n\t\treturn date.toFormat('mm')\r\n\t}\r\n\tgetSecondText(date) {\r\n\t\tif ('ja' !== this.locale) return super.getSecondText(date)\r\n\t\treturn date.toFormat('ss')\r\n\t}\r\n}\r\n\r\nconst wrap = (Picker, over) => {\r\n\tconst MyPicker = props => (\r\n\t\t<UtilsProvider utils={Utils} locale=\"ja\">\r\n\t\t\t<Picker {...over} {...props} />\r\n\t\t</UtilsProvider>\r\n\t)\r\n\treturn MyPicker\r\n}\r\n\r\nexport const TimeInput = wrap(TimePicker, { ampm: false })\r\nexport const DateInput = wrap(DatePicker)\r\nexport const DateTimeInput = wrap(DateTimePicker, { ampm: false })\r\n","import React from 'react'\r\nimport { withStyles } from '@material-ui/core/styles'\r\n\r\nexport const Right = withStyles({\r\n\troot: {\r\n\t\ttextAlign: 'right',\r\n\t},\r\n})(({ classes: { root }, children }) => <div className={root}>{children}</div>)\r\n\r\nexport const Left = withStyles({\r\n\troot: {\r\n\t\ttextAlign: 'left',\r\n\t},\r\n})(({ classes: { root }, children }) => <div className={root}>{children}</div>)\r\n\r\nexport const Hidable = ({ show, children }) => (show ? children : null)\r\n\r\nexport { Message } from './Message'\r\n\r\nexport { TimeInput, DateInput, DateTimeInput } from './DateInput'\r\n","import React, { Component } from 'react'\nimport { of } from 'rxjs'\nimport { concatMap, filter } from 'rxjs/operators'\nimport Button from '@material-ui/core/Button'\nimport { Right, TimeInput, DateInput, DateTimeInput } from '../views'\nimport { DateTime } from 'luxon'\n\nconst wrap = (Input, outfmt, infmt) => (vars, name, initdatetime) => {\n\tlet res\n\tclass Form extends Component {\n\t\tconstructor(...p) {\n\t\t\tsuper(...p)\n\t\t\tthis.state = {\n\t\t\t\tv:\n\t\t\t\t\tinfmt && initdatetime\n\t\t\t\t\t\t? DateTime.fromFormat(initdatetime, infmt)\n\t\t\t\t\t\t: DateTime.local(),\n\t\t\t\tp: false,\n\t\t\t}\n\t\t}\n\t\trender() {\n\t\t\tif (this.state.p)\n\t\t\t\treturn (\n\t\t\t\t\t<Right>\n\t\t\t\t\t\t<Button color=\"primary\" readOnly>\n\t\t\t\t\t\t\t{this.state.v.toFormat(outfmt)}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</Right>\n\t\t\t\t)\n\t\t\tconst onSubmit = () => {\n\t\t\t\tconst {\n\t\t\t\t\tstate: { v },\n\t\t\t\t} = this\n\t\t\t\tvars[name] = v.toFormat(outfmt)\n\t\t\t\tthis.setState({ p: true })\n\t\t\t\tres()\n\t\t\t}\n\t\t\tconst onChange = async value => {\n\t\t\t\tawait this.setState({ v: value })\n\t\t\t\tonSubmit()\n\t\t\t}\n\t\t\treturn (\n\t\t\t\t<Right>\n\t\t\t\t\t<Input value={this.state.v} onChange={onChange} format={outfmt} />\n\t\t\t\t\t<Button color=\"primary\" onClick={onSubmit}>\n\t\t\t\t\t\tOK\n\t\t\t\t\t</Button>\n\t\t\t\t</Right>\n\t\t\t)\n\t\t}\n\t}\n\treturn of(1, 0).pipe(\n\t\tconcatMap(num => (num ? of(<Form />) : new Promise(r => (res = r)))),\n\t\tfilter(_ => _),\n\t)\n}\n\nexport const dateForm = wrap(DateInput, 'y年L月d日', 'y-L-d')\nexport const datetimeForm = wrap(DateTimeInput, 'y年L月d日 H時m分', 'y-L-d H:m')\nexport const timeForm = wrap(TimeInput, 'H時m分', 'H:m')\n","import React, { Component, createRef } from 'react'\nimport { of } from 'rxjs'\nimport { concatMap, filter } from 'rxjs/operators'\n\nimport Input from '@material-ui/core/Input'\nimport FormControl from '@material-ui/core/FormControl'\nimport Select from '@material-ui/core/Select'\nimport MenuItem from '@material-ui/core/MenuItem'\nimport Button from '@material-ui/core/Button'\nimport { Right } from '../views'\n\nimport { withStyles } from '@material-ui/core/styles'\n\nconst FormWrap = withStyles(\n\tt => ({\n\t\troot: {\n\t\t\tmargin: t.spacing.unit,\n\t\t\tminWidth: 120,\n\t\t\tmaxWidth: 300,\n\t\t},\n\t}),\n\t{ withTheme: true },\n)(FormControl)\n\nexport const selectForm = (vars, name, _enums, ...opts) => {\n\tlet res\n\tconst dict = _enums.reduce((d, n) => {\n\t\tconst [val, key] = Array.isArray(n) ? n : [n, n]\n\t\treturn { ...d, [key]: val }\n\t}, {})\n\tconst getlabel = k => dict[k]\n\tconst enums = _enums.map(n => {\n\t\t// eslint-disable-next-line no-unused-vars\n\t\tconst [val, key] = Array.isArray(n) ? n : [n, n]\n\t\treturn key\n\t})\n\tconst multiple = opts.includes('multiple')\n\tconst allowEmpty = opts.includes('allowEmpty')\n\tconst placeholder =\n\t\t(opts.filter(_ => /^placeholder=/.test(_)).pop() || '').slice(12) ||\n\t\t'選択してください'\n\tclass Form extends Component {\n\t\tconstructor(...p) {\n\t\t\tsuper(...p)\n\t\t\tthis.ref = createRef()\n\t\t\tthis.state = {\n\t\t\t\tid: `${Date.now()}:${Math.random()}`,\n\t\t\t\tdone: false,\n\t\t\t\topen: false,\n\t\t\t\tselected: [],\n\t\t\t}\n\t\t\tthis.select = async ({ target: { value: v } }) => {\n\t\t\t\tvars[name] = multiple ? v : v.join()\n\t\t\t\tlet ok\n\t\t\t\tawait this.setState(s => {\n\t\t\t\t\tok = !multiple && v.length\n\t\t\t\t\treturn { ...s, selected: v, done: !!ok }\n\t\t\t\t})\n\t\t\t\tif (ok) res()\n\t\t\t}\n\t\t\tthis.onClose = async v => {\n\t\t\t\tthis._flag = true\n\t\t\t\tlet ok\n\t\t\t\tawait this.setState(s => {\n\t\t\t\t\tok = allowEmpty || (multiple && this.state.selected.length)\n\t\t\t\t\treturn { ...s, open: false, done: !!ok }\n\t\t\t\t})\n\t\t\t\tthis._flag = false\n\t\t\t\tif (ok) res()\n\t\t\t}\n\t\t\tthis.onOpen = v => {\n\t\t\t\tif (this._flag) return\n\t\t\t\tthis.setState({ open: true })\n\t\t\t}\n\t\t}\n\t\trender() {\n\t\t\tconst {\n\t\t\t\tstate: { open, done, selected },\n\t\t\t\tselect,\n\t\t\t\tonOpen,\n\t\t\t\tonClose,\n\t\t\t} = this\n\t\t\tif (done)\n\t\t\t\treturn (\n\t\t\t\t\t<Right>\n\t\t\t\t\t\t{selected.map(name => (\n\t\t\t\t\t\t\t<Button color=\"primary\" readOnly key={name}>\n\t\t\t\t\t\t\t\t{getlabel(name)}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</Right>\n\t\t\t\t)\n\t\t\treturn (\n\t\t\t\t<Right>\n\t\t\t\t\t<FormWrap>\n\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\tmultiple\n\t\t\t\t\t\t\tdisplayEmpty\n\t\t\t\t\t\t\tplaceholder={placeholder}\n\t\t\t\t\t\t\tvalue={selected}\n\t\t\t\t\t\t\tonChange={select}\n\t\t\t\t\t\t\tinput={<Input onClick={onOpen} onFocus={onOpen} />}\n\t\t\t\t\t\t\tMenuProps={{ ...MenuProps, open, onClose }}\n\t\t\t\t\t\t\trenderValue={selected =>\n\t\t\t\t\t\t\t\tselected.length ? (\n\t\t\t\t\t\t\t\t\tselected.map(getlabel).join(' ')\n\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t<em>{placeholder}</em>\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<MenuItem disabled value=\"\">\n\t\t\t\t\t\t\t\t<em>{placeholder}</em>\n\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t{enums.map(name => (\n\t\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\t\tkey={name}\n\t\t\t\t\t\t\t\t\tvalue={name}\n\t\t\t\t\t\t\t\t\tselected={selected.includes(name)}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{getlabel(name)}\n\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</Select>\n\t\t\t\t\t</FormWrap>\n\t\t\t\t</Right>\n\t\t\t)\n\t\t}\n\t}\n\treturn of(1, 0).pipe(\n\t\tconcatMap(num => (num ? of(<Form />) : new Promise(r => (res = r)))),\n\t\tfilter(_ => _),\n\t)\n}\n\nconst ITEM_HEIGHT = 48\nconst ITEM_PADDING_TOP = 8\nconst MenuProps = {\n\tdisableAutoFocusItem: !true,\n\tPaperProps: {\n\t\tstyle: {\n\t\t\tmaxHeight: ITEM_HEIGHT * 4.5 + ITEM_PADDING_TOP,\n\t\t\twidth: 250,\n\t\t},\n\t},\n}\n","import React from 'react'\nimport { of } from 'rxjs'\n\nimport Button from '@material-ui/core/Button'\n\n/* eslint-disable react/jsx-no-target-blank */\nconst Ln = ({ children, href }) => (\n\t<a href={href} target=\"_blank\">\n\t\t{children}\n\t</a>\n)\n/* eslint-enable */\n\nexport const link = (vars, title, href) =>\n\tof(\n\t\t<Button color=\"primary\" href={href} component={Ln}>\n\t\t\t{title}\n\t\t</Button>,\n\t)\n","export const CLEAR = { CLEAR: 'CLEAR' }\nexport const NO_CHANGE = { NO_CHANGE: 'NO_CHANGE' }\nexport const POP = { POP: 'POP' }\n","import { ReplaySubject } from 'rxjs'\n\nexport const part = new ReplaySubject()\n\nexport const pushPart = item => part.next(item)\n","import { of } from 'rxjs'\nimport { concatMap } from 'rxjs/operators'\nimport { safeLoad } from 'js-yaml'\nimport { pushPart } from '../subjects/part'\nimport { stringify } from 'query-string'\n\nconst parseYaml = _ => safeLoad(_.replace(/\\](\\s+)\\[/giu, '],$1['))\n\nexport const readFile = (file, query) =>\n\tfetch(`./${file}?${stringify(query)}`)\n\t\t.then(r => r.text())\n\t\t.then(parseYaml)\n\t\t.then(pushPart)\n\t\t.then(() => null)\n\nexport const getStory = (vars, file, ...names) => {\n\tconst query = names.reduce((o, name) => ({ ...o, [name]: vars[name] }), {})\n\treturn of(0).pipe(concatMap(_ => readFile(file, query)))\n}\n","import { of } from 'rxjs'\n\nimport { set } from './set'\nimport { message } from './message'\nimport { delay } from './delay'\nimport { dateForm, timeForm, datetimeForm } from './dateForm'\nimport { enumForm } from './enumForm'\nimport { selectForm } from './selectForm'\nimport { link } from './link'\nimport { pending } from './pending'\nimport { clear } from './clear'\nimport { getStory } from './getStory'\n\nimport { when } from './when'\n\nexport { readFile } from './getStory'\n\nexport { CLEAR, NO_CHANGE, POP } from './consts'\n\nconst table = {\n\tset,\n\tmessage,\n\tdelay,\n\tdateForm,\n\ttimeForm,\n\tdatetimeForm,\n\tenumForm,\n\tselectForm,\n\tlink,\n\tpending,\n\tclear,\n\tgetStory,\n}\n\nexport const talk = vars => ([method, ...args]) => {\n\tconst fn = table[method]\n\n\tconst view = fn ? fn(vars, ...args) : of()\n\n\treturn view\n}\n\ntable.when = when(talk)\n","import React from 'react'\nimport { of } from 'rxjs'\n\nimport { Message } from '../views'\nimport Typography from '@material-ui/core/Typography'\n\nimport { withVars } from './set'\n\nexport const message = (vars, text) => {\n\tconst { speaker, icon } = vars\n\treturn of(\n\t\t<Message icon={icon} speaker={speaker}>\n\t\t\t<Typography>{withVars(text, vars)}</Typography>\n\t\t</Message>,\n\t)\n}\n","export const usleep = ms => new Promise(s => setTimeout(s, ms))\n\nexport const delay = (_, ms) => usleep(ms)\n","import React, { Component } from 'react'\nimport { of } from 'rxjs'\nimport { concatMap, filter } from 'rxjs/operators'\n\nimport Button from '@material-ui/core/Button'\nimport { Right } from '../views'\n\nexport const enumForm = (vars, name, enums) => {\n\tlet res\n\tclass Form extends Component {\n\t\tconstructor(...p) {\n\t\t\tsuper(...p)\n\t\t\tthis.state = {\n\t\t\t\tdone: false,\n\t\t\t\tselected: null,\n\t\t\t}\n\t\t\tthis.select = v => {\n\t\t\t\tvars[name] = v\n\t\t\t\tthis.setState({ done: true, selected: v })\n\t\t\t\tres()\n\t\t\t}\n\t\t}\n\t\trender() {\n\t\t\tconst {\n\t\t\t\tstate: { done, selected },\n\t\t\t\tselect,\n\t\t\t} = this\n\t\t\treturn (\n\t\t\t\t<Right>\n\t\t\t\t\t{enums.map(name => {\n\t\t\t\t\t\tconst [label, value] = Array.isArray(name) ? name : [name, name]\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\treadOnly={selected === value}\n\t\t\t\t\t\t\t\tdisabled={!!done && selected !== value}\n\t\t\t\t\t\t\t\tkey={value}\n\t\t\t\t\t\t\t\tonClick={() => select(value)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{label}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t)\n\t\t\t\t\t})}\n\t\t\t\t</Right>\n\t\t\t)\n\t\t}\n\t}\n\treturn of(1, 0).pipe(\n\t\tconcatMap(num => (num ? of(<Form />) : new Promise(r => (res = r)))),\n\t\tfilter(_ => _),\n\t)\n}\n","import React, { Component } from 'react'\r\nimport { of } from 'rxjs'\r\nimport { concatMap, filter } from 'rxjs/operators'\r\nimport Loading from 'react-loading'\r\n\r\nimport { Message } from '../views'\r\nimport { POP } from './consts'\r\n\r\nexport const pending = ({ icon, speaker }, ms) => {\r\n\tlet resolve\r\n\tclass Mortal extends Component {\r\n\t\tconstructor(...p) {\r\n\t\t\tsuper(...p)\r\n\t\t\tthis.state = {}\r\n\t\t}\r\n\t\tcomponentDidMount() {\r\n\t\t\tthis._id = setTimeout(() => {\r\n\t\t\t\tthis.setState({ dead: true })\r\n\t\t\t\tresolve(POP)\r\n\t\t\t}, ms)\r\n\t\t}\r\n\t\tcomponentWillUnmount() {\r\n\t\t\tclearTimeout(this._id)\r\n\t\t}\r\n\t\trender() {\r\n\t\t\treturn this.state.dead ? null : (\r\n\t\t\t\t<Message icon={icon} speaker={speaker}>\r\n\t\t\t\t\t<Loading type=\"bubbles\" height=\"1em\" width=\"1em\" color=\"#000\" />\r\n\t\t\t\t</Message>\r\n\t\t\t)\r\n\t\t}\r\n\t}\r\n\tconst prom = new Promise(r => (resolve = r))\r\n\treturn of(1, 0).pipe(\r\n\t\tconcatMap(num => (num ? of(<Mortal />) : prom)),\r\n\t\tfilter(_ => _),\r\n\t)\r\n}\r\n","import { CLEAR } from './consts'\r\n\r\nimport { of } from 'rxjs'\r\n\r\nexport const clear = () => of(CLEAR)\r\n","import { from } from 'rxjs'\nimport { switchMap, concatMap, filter, scan } from 'rxjs/operators'\n\nimport { talk, NO_CHANGE, CLEAR, POP } from '../talk'\n\nimport { part } from './part'\n\nconst variables = {}\nexport const story = part.pipe(\n\tswitchMap(({ title, body }) => {\n\t\tconst el = document.querySelector('title')\n\t\tif (el && title) el.innerText = title\n\t\treturn from(body).pipe(concatMap(talk(variables)))\n\t}),\n\tfilter(v => NO_CHANGE !== v && v),\n\tscan(\n\t\t(lst, c) =>\n\t\t\tCLEAR === c ? [] : POP === c ? lst.slice(0, lst.length - 1) : [...lst, c],\n\t\t[],\n\t),\n)\n","import * as SmoothScroll from 'smooth-scroll'\r\n\r\nexport const autoScroll = element => {\r\n\tif (inView(element)) return\r\n\tconst scroll = new SmoothScroll()\r\n\tscroll.animateScroll(getPosition(element))\r\n\treturn () => {\r\n\t\tscroll.cancelScroll()\r\n\t\tscroll.destroy()\r\n\t}\r\n}\r\n\r\nconst inView = element => {\r\n\tconst { top, bottom } = element.getBoundingClientRect()\r\n\tconst { innerHeight: height } = window\r\n\tif (0 <= top && bottom <= height) {\r\n\t\treturn true\r\n\t}\r\n}\r\n\r\nconst getPosition = element => {\r\n\tconst { top, bottom } = element.getBoundingClientRect()\r\n\tconst { innerHeight: height } = window\r\n\tconst goTop = Math.max(0 - top, 0) >= Math.max(bottom - height, 0)\r\n\treturn goTop ? getViewTop() + top - 16 : getViewTop() + bottom + 16 - height\r\n}\r\n\r\nconst getViewTop = () => {\r\n\tlet t\r\n\treturn (((t = document.documentElement) || (t = document.body.parentNode)) &&\r\n\t'number' === typeof t.scrollTop\r\n\t\t? t\r\n\t\t: document.body\r\n\t).scrollTop\r\n}\r\n","import React, { Component, createRef } from 'react'\n\nimport { withStyles } from '@material-ui/core/styles'\n\nimport Paper from '@material-ui/core/Paper'\n\nimport { story } from './subjects'\nimport { map } from 'rxjs/operators'\n\nimport { autoScroll } from './views/autoScroll'\n\nconst bodystyle = document.createElement('style')\ndocument.head.append(bodystyle)\nbodystyle.innerHTML = `\n\tbody {\n\t\tmargin: 0;\n\t\tpadding: 0;\n\t\tbackground: #e3e3e3;\n\t}\n`\n\nexport const App = withStyles({\n\troot: {\n\t\tmargin: 0,\n\t\tpadding: 10,\n\t},\n\tcard: {\n\t\tmarginBottom: 3,\n\t},\n\tcontent: {\n\t\tpaddingTop: 8,\n\t\tpaddingBottom: 8,\n\t\tpaddingLeft: 16,\n\t\tpaddingRight: 16,\n\t},\n})(\n\tclass App extends Component {\n\t\tconstructor(...p) {\n\t\t\tsuper(...p)\n\t\t\tthis.state = {}\n\t\t\tthis.lastref = createRef()\n\t\t\tthis.prevref = null\n\t\t}\n\t\tcomponentDidMount() {\n\t\t\tthis.$ = story\n\t\t\t\t.pipe(map(story => ({ story })))\n\t\t\t\t.subscribe(this.setState.bind(this))\n\t\t}\n\t\tcomponentDidUpdate() {\n\t\t\tconst current = this.lastref.current\n\t\t\tconst prev = this.prevref\n\t\t\tif (!current || prev === current) return\n\t\t\tthis.prevref = current\n\t\t\tif (this._cancel) this._cancel()\n\t\t\tthis._cancel = autoScroll(current)\n\t\t}\n\t\tcomponentWillUnmount() {\n\t\t\tthis.$.unsubscribe()\n\t\t\tthis.$ = null\n\t\t}\n\t\trender() {\n\t\t\tconst {\n\t\t\t\tprops: {\n\t\t\t\t\tclasses: { root, card, content },\n\t\t\t\t},\n\t\t\t\tstate: { story },\n\t\t\t\tlastref,\n\t\t\t} = this\n\t\t\tif (!Array.isArray(story)) return null\n\t\t\treturn (\n\t\t\t\t<div className={root}>\n\t\t\t\t\t{story.map((row, i) => (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\t\tclassName={card}\n\t\t\t\t\t\t\tref={i === story.length - 1 ? lastref : null}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Paper className={content}>{row}</Paper>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t))}\n\t\t\t\t</div>\n\t\t\t)\n\t\t}\n\t},\n)\n","import './fix'\n\nimport React from 'react'\nimport { render } from 'react-dom'\n\nimport { App } from './App'\nimport { readFile } from './talk'\n\nconst main = () => {\n\treadFile('./story.yaml')\n\trender(<App />, document.getElementById('screen'))\n}\n\nPromise.resolve()\n\t.then(main)\n\t.catch(console.log.bind(console))\n"],"sourceRoot":""}